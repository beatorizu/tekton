{% extends 'lessons/base.html' %}
{% block js %}
    {# https://docs.angularjs.org/error/$injector/unpr?p0=LessonApiProvider%20%3C-%20LessonApi #}
    <script type="text/javascript" src="/static/angular/js/angular.min.js"></script>
    <script type="text/javascript" src="/static/lesson/js/lesson.js"></script><!--referência ao módulo lesson-->
    <script>

        var rest = angular.module('rest',[]);
        rest.factory('LessonApi',function($http) {
        return {
           salvar: function(lesson) {
               return $http.post('{{ rest_new_path }}',lesson);
           }
       };
    });

        var lessonApp = angular.module('lessonApp', ['lessonModule']);
        function LessonController($scope) {
            $scope.lesson = {titulo: 'Titulo', descricao: 'Descrição'};
            $scope.showFormFlag = false;
            $scope.showOrHideForm = function() {
                $scope.showFormFlag = !$scope.showFormFlag;
            }
        }
    </script>
{% endblock %}
{% block body %}
{% set lesson = lesson or None %}
{% set erros = erros or None %}
<div class="container">
   <div class="row">
    <div class="col-md-8 col-md-offset-2" ng-app="lessonApp" ng-controller="LessonController">
        <button class="btn btn-success" ng-click="showOrHideForm()">Criar nova Lição</button>
        <lessonform ng-show="showFormFlag" lesson="lesson" titulo-label="Titulo" descricao-label="Descrição"></lessonform>
    </div>
   </div>
</div>
{% endblock %}